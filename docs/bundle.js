(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var r={},i=[],s=0;s<e.length;s++){var l=e[s],c=a.base?l[0]+a.base:l[0],u=r[c]||0,p="".concat(c," ").concat(u);r[c]=u+1;var g=n(p),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==g)t[g].references++,t[g].updater(d);else{var h=o(d,a);a.byIndex=s,t.splice(s,0,{identifier:p,updater:h,references:1})}i.push(p)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=a(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var s=n(r[i]);t[s].references--}for(var l=a(e,o),c=0;c<r.length;c++){var u=n(r[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);a&&i[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},365:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(601),o=n.n(a),r=n(314),i=n.n(r)()(o());i.push([e.id,"body {\n    font-family: Arial, sans-serif;\n    background-color: white;\n    margin: 0;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 100vh;\n}\n\nh1 {\n    font-size: 24px;\n    color: #333;\n    margin-bottom: 20px;\n}\n\n#gauge-container {\n    position: relative;\n    width: 300px;\n    height: 180px;\n    margin-bottom: 20px;\n}\n\n#gauge-svg {\n    width: 300px;\n    height: 180px;\n}\n\n.gauge-labels {\n    position: relative;\n    width: 270px;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n}\n\n.gauge-label {\n    font-size: 16px;\n    font-weight: bold;\n}\n\n.left {\n    color: #D32F2F;\n}\n\n.right {\n    color: #4CAF50;\n}\n\n#gauge-text {\n    font-size: 20px;\n    font-weight: bold;\n    text-align: center;\n    margin-bottom: 5px;\n}\n\n#gauge-percentage {\n    font-size: 36px;\n    font-weight: bold;\n    text-align: center;\n    margin-bottom: 20px;\n}\n\n#controls {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 15px;\n    width: 100%;\n    max-width: 300px;\n}\n\n#button-container {\n    display: flex;\n    gap: 10px;\n}\n\nbutton {\n    padding: 10px 15px;\n    font-size: 14px;\n    border: none;\n    border-radius: 5px;\n    background-color: #2AABEE;\n    color: white;\n    cursor: pointer;\n}\n\nbutton:hover {\n    background-color: #1D8FBF;\n}\n\n#value-slider {\n    width: 100%;\n}",""]);const s=i},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,o&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var a=n(72),o=n.n(a),r=n(825),i=n.n(r),s=n(659),l=n.n(s),c=n(56),u=n.n(c),p=n(540),g=n.n(p),d=n(113),h=n.n(d),m=n(365),f={};f.styleTagTransform=h(),f.setAttributes=u(),f.insert=l().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=g(),o()(m.A,f),m.A&&m.A.locals&&m.A.locals;var v=function(){function e(){this.centerX=150,this.centerY=150,this.radius=120,this.min=0,this.max=100,this.startAngle=180,this.endAngle=0,this.levels=[{min:0,max:14.28,text:"COMPLETE BULLSHIT",color:"#D32F2F"},{min:14.28,max:28.57,text:"VERY FALSE",color:"#E64A19"},{min:28.57,max:42.85,text:"MOSTLY FALSE",color:"#F57C00"},{min:42.85,max:57.14,text:"QUESTIONABLE",color:"#FF9800"},{min:57.14,max:71.42,text:"PARTIALLY TRUE",color:"#FFC107"},{min:71.42,max:85.71,text:"MOSTLY TRUE",color:"#CDDC39"},{min:85.71,max:100,text:"FACTUAL",color:"#4CAF50"},{min:100,max:101,text:"ABSOLUTE TRUTH",color:"#4CAF50"}],this.segments=[{start:0,end:14.28,color:"#D32F2F"},{start:14.28,end:28.57,color:"#E64A19"},{start:28.57,end:42.85,color:"#F57C00"},{start:42.85,end:57.14,color:"#FF9800"},{start:57.14,end:71.42,color:"#FFC107"},{start:71.42,end:85.71,color:"#CDDC39"},{start:85.71,end:100,color:"#4CAF50"}]}return e.prototype.valueToAngle=function(e){return this.startAngle-(e-this.min)/(this.max-this.min)*(this.startAngle-this.endAngle)},e.prototype.toRadians=function(e){return e*Math.PI/180},e.prototype.getLevelForValue=function(e){return this.levels.find((function(t){return e>=t.min&&e<t.max}))},e.prototype.getSegments=function(){return this.segments},e.prototype.getSegmentPathData=function(e){var t=this.toRadians(this.valueToAngle(e.start)),n=this.toRadians(this.valueToAngle(e.end));return{startX:this.centerX+this.radius*Math.cos(t),startY:this.centerY-this.radius*Math.sin(t),endX:this.centerX+this.radius*Math.cos(n),endY:this.centerY-this.radius*Math.sin(n),largeArcFlag:Math.abs(e.end-e.start)>50?1:0}},e.prototype.getNeedleRotation=function(e){return this.valueToAngle(e)-90},e.prototype.generateRandomScore=function(){return Math.floor(101*Math.random())},e}(),b=function(){function e(){var e;this.webApp=null===(e=window.Telegram)||void 0===e?void 0:e.WebApp,this.debugTelegramData()}return e.prototype.isAvailable=function(){var e;return!!(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)},e.prototype.initialize=function(){console.log("Initializing Telegram Service..."),this.isAvailable()?(this.webApp.ready(),this.webApp.expand(),this.applyTelegramTheme(),console.log("Telegram Web App initialized successfully")):console.warn("Telegram Web App not available - running in standalone mode")},e.prototype.debugTelegramData=function(){var e,t;console.log("=== TELEGRAM DEBUG INFO ==="),console.log("window.Telegram:",window.Telegram),console.log("WebApp available:",!!(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)),(null===(t=window.Telegram)||void 0===t?void 0:t.WebApp)&&(console.log("initData:",window.Telegram.WebApp.initData),console.log("initDataUnsafe:",window.Telegram.WebApp.initDataUnsafe));var n=new URLSearchParams(window.location.search);console.log("URL search params:",window.location.search),console.log("startapp param:",n.get("startapp")),console.log("=== END DEBUG INFO ===")},e.prototype.getBSMeterData=function(){if(console.log("Getting BS Meter data..."),this.webApp&&this.webApp.initDataUnsafe)try{var e=this.webApp.initDataUnsafe.start_param;if(console.log("Found start_param in initDataUnsafe:",e),e){var t=decodeURIComponent(e),n=atob(t),a=JSON.parse(n);return console.log("Successfully parsed BS Meter data from Telegram:",a),a}}catch(t){console.error("Error parsing Telegram initDataUnsafe:",t);try{if(e=this.webApp.initDataUnsafe.start_param)return n=atob(e),a=JSON.parse(n),console.log("Successfully parsed BS Meter data from Telegram (fallback):",a),a}catch(e){console.error("Fallback parsing also failed:",e)}}try{if(e=new URLSearchParams(window.location.search).get("startapp"),console.log("Found startapp in URL:",e),e)return t=decodeURIComponent(e),n=atob(t),a=JSON.parse(n),console.log("Successfully parsed BS Meter data from URL:",a),a}catch(t){console.error("Error parsing URL parameters:",t);try{if(e=new URLSearchParams(window.location.search).get("startapp"))return n=atob(e),a=JSON.parse(n),console.log("Successfully parsed BS Meter data from URL (fallback):",a),a}catch(e){console.error("URL fallback parsing also failed:",e)}}if(this.webApp&&this.webApp.initData)try{if(console.log("Trying to parse raw initData:",this.webApp.initData),e=new URLSearchParams(this.webApp.initData).get("start_param"),console.log("Found start_param in raw initData:",e),e)return t=decodeURIComponent(e),n=atob(t),a=JSON.parse(n),console.log("Successfully parsed BS Meter data from raw initData:",a),a}catch(t){console.error("Error parsing raw initData:",t);try{if(e=new URLSearchParams(this.webApp.initData).get("start_param"))return n=atob(e),a=JSON.parse(n),console.log("Successfully parsed BS Meter data from raw initData (fallback):",a),a}catch(e){console.error("Raw initData fallback parsing also failed:",e)}}return console.warn("No BS Meter data found in any source"),null},e.prototype.getOverallScore=function(){var e=this.getBSMeterData();return e&&"number"==typeof e.overall_score?(console.log("Found overall score: ".concat(e.overall_score)),e.overall_score):(console.warn("No overall score found"),null)},e.prototype.applyTelegramTheme=function(){var e;if(null===(e=this.webApp)||void 0===e?void 0:e.themeParams){var t=document.documentElement,n=this.webApp.themeParams;n.bg_color&&(t.style.setProperty("--tg-bg-color",n.bg_color),document.body.style.backgroundColor=n.bg_color),n.text_color&&(t.style.setProperty("--tg-text-color",n.text_color),document.body.style.color=n.text_color),n.button_color&&t.style.setProperty("--tg-button-color",n.button_color),n.button_text_color&&t.style.setProperty("--tg-button-text-color",n.button_text_color)}},e.prototype.showMainButton=function(e,t){this.isAvailable()&&(this.webApp.MainButton.text=e,this.webApp.MainButton.onClick(t),this.webApp.MainButton.show())},e.prototype.hideMainButton=function(){this.isAvailable()&&this.webApp.MainButton.hide()},e.prototype.close=function(){this.isAvailable()&&this.webApp.close()},e}(),y=function(){function e(){this.currentValue=30,this.animationInterval=null,this.isAnimating=!1,this.bsMeterData=null,this.gaugeService=new v,this.telegramService=new b,this.gaugeSegments=document.getElementById("segments"),this.needle=document.getElementById("needle"),this.gaugeText=document.getElementById("gauge-text"),this.gaugePercentage=document.getElementById("gauge-percentage"),this.randomBtn=document.getElementById("random-btn"),this.animateBtn=document.getElementById("animate-btn"),this.valueSlider=document.getElementById("value-slider"),this.gaugeSegments&&this.needle&&this.gaugeText&&this.gaugePercentage&&this.randomBtn&&this.animateBtn&&this.valueSlider?this.init():console.error("One or more elements not found")}return e.prototype.init=function(){console.log("=== BS METER INITIALIZATION ==="),this.telegramService.initialize(),this.bsMeterData=this.telegramService.getBSMeterData(),console.log("BS Meter Data received:",this.bsMeterData),this.createGaugeSegments();var e=this.telegramService.getOverallScore();console.log("Initial score from Telegram:",e),null!==e?(this.currentValue=Math.round(100*e),console.log("✅ Setting gauge to Telegram score: ".concat(this.currentValue,"%"))):console.log("⚠️ No Telegram score found, using default: ".concat(this.currentValue,"%")),this.setGaugeValue(this.currentValue),this.setupEventListeners(),this.bsMeterData?(console.log("✅ Category data available, setting up category view"),this.setupCategoryView()):console.log("⚠️ No category data available"),console.log("=== BS METER INITIALIZATION COMPLETE ===")},e.prototype.setupEventListeners=function(){var e,t,n,a=this;null===(e=this.randomBtn)||void 0===e||e.addEventListener("click",(function(){return a.generateRandomScore()})),null===(t=this.animateBtn)||void 0===t||t.addEventListener("click",(function(){return a.toggleAnimation()})),null===(n=this.valueSlider)||void 0===n||n.addEventListener("input",(function(e){if(!a.isAnimating){var t=e.target;a.setGaugeValue(parseInt(t.value))}}))},e.prototype.setupCategoryView=function(){var e=this;this.bsMeterData&&this.telegramService.showMainButton("View Category Breakdown",(function(){e.showCategoryBreakdown()}))},e.prototype.showCategoryBreakdown=function(){if(this.bsMeterData){var e=this.bsMeterData.categories,t="Category Breakdown:\n\n";Object.entries(e).forEach((function(e){var n=e[0],a=e[1],o=n.replace(/_/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()})),r=Math.round(100*a.score);t+="".concat(o,": ").concat(r,"%\n")})),alert(t)}},e.prototype.createGaugeSegments=function(){var e=this;this.gaugeSegments&&(this.gaugeSegments.innerHTML="",this.gaugeService.getSegments().forEach((function(t){var n,a=e.gaugeService.getSegmentPathData(t),o=a.startX,r=a.startY,i=a.endX,s=a.endY,l=a.largeArcFlag,c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M 150 150 L ".concat(o," ").concat(r," A ").concat(120," ").concat(120," 0 ").concat(l," 1 ").concat(i," ").concat(s," Z")),c.setAttribute("fill",t.color),c.setAttribute("stroke","white"),c.setAttribute("stroke-width","1"),c.setAttribute("stroke-opacity","0.7"),null===(n=e.gaugeSegments)||void 0===n||n.appendChild(c)})))},e.prototype.rotateNeedle=function(e){if(this.needle){var t=this.gaugeService.getNeedleRotation(e);this.needle.setAttribute("transform","rotate(".concat(t," 150 150)"))}},e.prototype.updateGaugeText=function(e){if(this.gaugeText&&this.gaugePercentage){var t=this.gaugeService.getLevelForValue(e);t&&(this.gaugeText.textContent=t.text,this.gaugeText.style.color=t.color,this.gaugePercentage.textContent="".concat(Math.round(e),"%"),this.gaugePercentage.style.color=t.color)}},e.prototype.setGaugeValue=function(e){this.currentValue=Math.max(0,Math.min(100,e)),this.valueSlider&&(this.valueSlider.value=this.currentValue.toString()),this.rotateNeedle(this.currentValue),this.updateGaugeText(this.currentValue)},e.prototype.generateRandomScore=function(){var e=this.gaugeService.generateRandomScore();this.setGaugeValue(e)},e.prototype.toggleAnimation=function(){var e=this;this.animateBtn&&(this.isAnimating?(null!==this.animationInterval&&(window.clearInterval(this.animationInterval),this.animationInterval=null),this.animateBtn.textContent="Illustrate",this.isAnimating=!1):(this.animationInterval=window.setInterval((function(){e.currentValue=e.currentValue>=100?0:e.currentValue+1,e.setGaugeValue(e.currentValue)}),50),this.animateBtn.textContent="Stop",this.isAnimating=!0))},e}();document.addEventListener("DOMContentLoaded",(function(){new y}))})();