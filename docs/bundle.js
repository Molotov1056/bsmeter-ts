(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var r={},i=[],s=0;s<t.length;s++){var l=t[s],c=o.base?l[0]+o.base:l[0],u=r[c]||0,g="".concat(c," ").concat(u);r[c]=u+1;var p=n(g),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var h=a(d,o);o.byIndex=s,e.splice(s,0,{identifier:g,updater:h,references:1})}i.push(g)}return i}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var r=o(t=t||[],a=a||{});return function(t){t=t||[];for(var i=0;i<r.length;i++){var s=n(r[i]);e[s].references--}for(var l=o(t,a),c=0;c<r.length;c++){var u=n(r[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}r=l}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,a,r){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);o&&i[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),e.push(u))}},e}},365:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(601),a=n.n(o),r=n(314),i=n.n(r)()(a());i.push([t.id,"body {\n    font-family: Arial, sans-serif;\n    background-color: white;\n    margin: 0;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 100vh;\n}\n\nh1 {\n    font-size: 24px;\n    color: #333;\n    margin-bottom: 20px;\n}\n\n#gauge-container {\n    position: relative;\n    width: 300px;\n    height: 180px;\n    margin-bottom: 20px;\n}\n\n#gauge-svg {\n    width: 300px;\n    height: 180px;\n}\n\n.gauge-labels {\n    position: relative;\n    width: 270px;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n}\n\n.gauge-label {\n    font-size: 16px;\n    font-weight: bold;\n}\n\n.left {\n    color: #D32F2F;\n}\n\n.right {\n    color: #4CAF50;\n}\n\n#gauge-text {\n    font-size: 20px;\n    font-weight: bold;\n    text-align: center;\n    margin-bottom: 5px;\n}\n\n#gauge-percentage {\n    font-size: 36px;\n    font-weight: bold;\n    text-align: center;\n    margin-bottom: 20px;\n}\n\n#controls {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 15px;\n    width: 100%;\n    max-width: 300px;\n}\n\n#button-container {\n    display: flex;\n    gap: 10px;\n}\n\nbutton {\n    padding: 10px 15px;\n    font-size: 14px;\n    border: none;\n    border-radius: 5px;\n    background-color: #2AABEE;\n    color: white;\n    cursor: pointer;\n}\n\nbutton:hover {\n    background-color: #1D8FBF;\n}\n\n#value-slider {\n    width: 100%;\n}",""]);const s=i},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,a&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={id:o,exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var o=n(72),a=n.n(o),r=n(825),i=n.n(r),s=n(659),l=n.n(s),c=n(56),u=n.n(c),g=n(540),p=n.n(g),d=n(113),h=n.n(d),m=n(365),f={};f.styleTagTransform=h(),f.setAttributes=u(),f.insert=l().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=p(),a()(m.A,f),m.A&&m.A.locals&&m.A.locals;var v=function(){function t(){this.centerX=150,this.centerY=150,this.radius=120,this.min=0,this.max=100,this.startAngle=180,this.endAngle=0,this.levels=[{min:0,max:14.28,text:"COMPLETE BULLSHIT",color:"#D32F2F"},{min:14.28,max:28.57,text:"VERY FALSE",color:"#E64A19"},{min:28.57,max:42.85,text:"MOSTLY FALSE",color:"#F57C00"},{min:42.85,max:57.14,text:"QUESTIONABLE",color:"#FF9800"},{min:57.14,max:71.42,text:"PARTIALLY TRUE",color:"#FFC107"},{min:71.42,max:85.71,text:"MOSTLY TRUE",color:"#CDDC39"},{min:85.71,max:100,text:"FACTUAL",color:"#4CAF50"},{min:100,max:101,text:"ABSOLUTE TRUTH",color:"#4CAF50"}],this.segments=[{start:0,end:14.28,color:"#D32F2F"},{start:14.28,end:28.57,color:"#E64A19"},{start:28.57,end:42.85,color:"#F57C00"},{start:42.85,end:57.14,color:"#FF9800"},{start:57.14,end:71.42,color:"#FFC107"},{start:71.42,end:85.71,color:"#CDDC39"},{start:85.71,end:100,color:"#4CAF50"}]}return t.prototype.valueToAngle=function(t){return this.startAngle-(t-this.min)/(this.max-this.min)*(this.startAngle-this.endAngle)},t.prototype.toRadians=function(t){return t*Math.PI/180},t.prototype.getLevelForValue=function(t){return this.levels.find((function(e){return t>=e.min&&t<e.max}))},t.prototype.getSegments=function(){return this.segments},t.prototype.getSegmentPathData=function(t){var e=this.toRadians(this.valueToAngle(t.start)),n=this.toRadians(this.valueToAngle(t.end));return{startX:this.centerX+this.radius*Math.cos(e),startY:this.centerY-this.radius*Math.sin(e),endX:this.centerX+this.radius*Math.cos(n),endY:this.centerY-this.radius*Math.sin(n),largeArcFlag:Math.abs(t.end-t.start)>50?1:0}},t.prototype.getNeedleRotation=function(t){return this.valueToAngle(t)-90},t.prototype.generateRandomScore=function(){return Math.floor(101*Math.random())},t}(),b=function(){function t(){var t;this.webApp=null===(t=window.Telegram)||void 0===t?void 0:t.WebApp,this.debugTelegramData()}return t.prototype.isAvailable=function(){var t;return!!(null===(t=window.Telegram)||void 0===t?void 0:t.WebApp)},t.prototype.initialize=function(){console.log("Initializing Telegram Service..."),this.isAvailable()?(this.webApp.ready(),this.webApp.expand(),this.applyTelegramTheme(),console.log("Telegram Web App initialized successfully")):console.warn("Telegram Web App not available - running in standalone mode")},t.prototype.debugTelegramData=function(){var t,e;console.log("=== TELEGRAM DEBUG INFO ==="),console.log("window.Telegram:",window.Telegram),console.log("WebApp available:",!!(null===(t=window.Telegram)||void 0===t?void 0:t.WebApp)),(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)&&(console.log("initData:",window.Telegram.WebApp.initData),console.log("initDataUnsafe:",window.Telegram.WebApp.initDataUnsafe));var n=new URLSearchParams(window.location.search);console.log("URL search params:",window.location.search),console.log("startapp param:",n.get("startapp")),console.log("=== END DEBUG INFO ===")},t.prototype.getBSMeterData=function(){if(console.log("Getting BS Meter data..."),this.webApp&&this.webApp.initDataUnsafe)try{var t=this.webApp.initDataUnsafe.start_param;if(console.log("Found start_param in initDataUnsafe:",t),t){var e=atob(t),n=JSON.parse(e);return console.log("Successfully parsed BS Meter data from Telegram:",n),n}}catch(t){console.error("Error parsing Telegram initDataUnsafe:",t)}try{if(t=new URLSearchParams(window.location.search).get("startapp"),console.log("Found startapp in URL:",t),t)return e=atob(t),n=JSON.parse(e),console.log("Successfully parsed BS Meter data from URL:",n),n}catch(t){console.error("Error parsing URL parameters:",t)}if(this.webApp&&this.webApp.initData)try{if(console.log("Trying to parse raw initData:",this.webApp.initData),t=new URLSearchParams(this.webApp.initData).get("start_param"),console.log("Found start_param in raw initData:",t),t)return e=atob(t),n=JSON.parse(e),console.log("Successfully parsed BS Meter data from raw initData:",n),n}catch(t){console.error("Error parsing raw initData:",t)}return console.warn("No BS Meter data found in any source"),null},t.prototype.getOverallScore=function(){var t=this.getBSMeterData();return t&&"number"==typeof t.overall_score?(console.log("Found overall score: ".concat(t.overall_score)),t.overall_score):(console.warn("No overall score found"),null)},t.prototype.applyTelegramTheme=function(){var t;if(null===(t=this.webApp)||void 0===t?void 0:t.themeParams){var e=document.documentElement,n=this.webApp.themeParams;n.bg_color&&(e.style.setProperty("--tg-bg-color",n.bg_color),document.body.style.backgroundColor=n.bg_color),n.text_color&&(e.style.setProperty("--tg-text-color",n.text_color),document.body.style.color=n.text_color),n.button_color&&e.style.setProperty("--tg-button-color",n.button_color),n.button_text_color&&e.style.setProperty("--tg-button-text-color",n.button_text_color)}},t.prototype.showMainButton=function(t,e){this.isAvailable()&&(this.webApp.MainButton.text=t,this.webApp.MainButton.onClick(e),this.webApp.MainButton.show())},t.prototype.hideMainButton=function(){this.isAvailable()&&this.webApp.MainButton.hide()},t.prototype.close=function(){this.isAvailable()&&this.webApp.close()},t}(),y=function(){function t(){this.currentValue=30,this.animationInterval=null,this.isAnimating=!1,this.bsMeterData=null,this.gaugeService=new v,this.telegramService=new b,this.gaugeSegments=document.getElementById("segments"),this.needle=document.getElementById("needle"),this.gaugeText=document.getElementById("gauge-text"),this.gaugePercentage=document.getElementById("gauge-percentage"),this.randomBtn=document.getElementById("random-btn"),this.animateBtn=document.getElementById("animate-btn"),this.valueSlider=document.getElementById("value-slider"),this.gaugeSegments&&this.needle&&this.gaugeText&&this.gaugePercentage&&this.randomBtn&&this.animateBtn&&this.valueSlider?this.init():console.error("One or more elements not found")}return t.prototype.init=function(){console.log("=== BS METER INITIALIZATION ==="),this.telegramService.initialize(),this.bsMeterData=this.telegramService.getBSMeterData(),console.log("BS Meter Data received:",this.bsMeterData),this.createGaugeSegments();var t=this.telegramService.getOverallScore();console.log("Initial score from Telegram:",t),null!==t?(this.currentValue=Math.round(100*t),console.log("✅ Setting gauge to Telegram score: ".concat(this.currentValue,"%"))):console.log("⚠️ No Telegram score found, using default: ".concat(this.currentValue,"%")),this.setGaugeValue(this.currentValue),this.setupEventListeners(),this.bsMeterData?(console.log("✅ Category data available, setting up category view"),this.setupCategoryView()):console.log("⚠️ No category data available"),console.log("=== BS METER INITIALIZATION COMPLETE ===")},t.prototype.setupEventListeners=function(){var t,e,n,o=this;null===(t=this.randomBtn)||void 0===t||t.addEventListener("click",(function(){return o.generateRandomScore()})),null===(e=this.animateBtn)||void 0===e||e.addEventListener("click",(function(){return o.toggleAnimation()})),null===(n=this.valueSlider)||void 0===n||n.addEventListener("input",(function(t){if(!o.isAnimating){var e=t.target;o.setGaugeValue(parseInt(e.value))}}))},t.prototype.setupCategoryView=function(){var t=this;this.bsMeterData&&this.telegramService.showMainButton("View Category Breakdown",(function(){t.showCategoryBreakdown()}))},t.prototype.showCategoryBreakdown=function(){if(this.bsMeterData){var t=this.bsMeterData.categories,e="Category Breakdown:\n\n";Object.entries(t).forEach((function(t){var n=t[0],o=t[1],a=n.replace(/_/g," ").replace(/\b\w/g,(function(t){return t.toUpperCase()})),r=Math.round(100*o.score);e+="".concat(a,": ").concat(r,"%\n")})),alert(e)}},t.prototype.createGaugeSegments=function(){var t=this;this.gaugeSegments&&(this.gaugeSegments.innerHTML="",this.gaugeService.getSegments().forEach((function(e){var n,o=t.gaugeService.getSegmentPathData(e),a=o.startX,r=o.startY,i=o.endX,s=o.endY,l=o.largeArcFlag,c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M 150 150 L ".concat(a," ").concat(r," A ").concat(120," ").concat(120," 0 ").concat(l," 1 ").concat(i," ").concat(s," Z")),c.setAttribute("fill",e.color),c.setAttribute("stroke","white"),c.setAttribute("stroke-width","1"),c.setAttribute("stroke-opacity","0.7"),null===(n=t.gaugeSegments)||void 0===n||n.appendChild(c)})))},t.prototype.rotateNeedle=function(t){if(this.needle){var e=this.gaugeService.getNeedleRotation(t);this.needle.setAttribute("transform","rotate(".concat(e," 150 150)"))}},t.prototype.updateGaugeText=function(t){if(this.gaugeText&&this.gaugePercentage){var e=this.gaugeService.getLevelForValue(t);e&&(this.gaugeText.textContent=e.text,this.gaugeText.style.color=e.color,this.gaugePercentage.textContent="".concat(Math.round(t),"%"),this.gaugePercentage.style.color=e.color)}},t.prototype.setGaugeValue=function(t){this.currentValue=Math.max(0,Math.min(100,t)),this.valueSlider&&(this.valueSlider.value=this.currentValue.toString()),this.rotateNeedle(this.currentValue),this.updateGaugeText(this.currentValue)},t.prototype.generateRandomScore=function(){var t=this.gaugeService.generateRandomScore();this.setGaugeValue(t)},t.prototype.toggleAnimation=function(){var t=this;this.animateBtn&&(this.isAnimating?(null!==this.animationInterval&&(window.clearInterval(this.animationInterval),this.animationInterval=null),this.animateBtn.textContent="Illustrate",this.isAnimating=!1):(this.animationInterval=window.setInterval((function(){t.currentValue=t.currentValue>=100?0:t.currentValue+1,t.setGaugeValue(t.currentValue)}),50),this.animateBtn.textContent="Stop",this.isAnimating=!0))},t}();document.addEventListener("DOMContentLoaded",(function(){new y}))})();